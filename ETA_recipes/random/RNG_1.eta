{"eta_index_table":"[{\"id\":\"var_templatejgmgopco\",\"name\":\"file\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"C:/Users/staff/Documents/Lidar LF/random data/210826/random_counts_cw_17.0uAbias_1h_500kCts_210825.timeres\"},{\"id\":\"var_templatejkim8rzm\",\"name\":\"expname\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"Randomness\"},{\"id\":\"var_templatejkim8w21\",\"name\":\"buffer_size\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"2000000\"},{\"id\":\"var_templatek8g3kag4\",\"name\":\"delay\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"var_templatek8g498fo\",\"name\":\"bw_delay\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"var_templatek8g49hcs\",\"name\":\"fw_delay\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"0\"},{\"id\":\"var_templateksuc2tvk\",\"name\":\"number\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"2\"},{\"id\":\"dpp_templatek7r3sgz1\",\"name\":\"evaluate\",\"group\":\"quTAG\",\"info\":\"\",\"config\":\"\"},{\"id\":\"vi_templatek6z7s4mo\",\"name\":\"quTAG\",\"group\":\"quTAG\",\"info\":\"ðŸ“œ[0, 1, 2, 3, 4, 5] \",\"config\":\"\"},{\"id\":\"vi_templatek0e3lgeo\",\"name\":\"DL1-6  (quTAG)\",\"group\":\"quTAG\",\"info\":\"ðŸ“¥[1] ðŸ“¤[6] \",\"config\":\"\"},{\"id\":\"vi_templatek0e3lz43\",\"name\":\"DL2-7 (quTAG)\",\"group\":\"quTAG\",\"info\":\"ðŸ“¥[2] ðŸ“¤[7] \",\"config\":\"\"},{\"id\":\"vi_templatek0e3qybt\",\"name\":\"randomness(quTAG)\",\"group\":\"quTAG\",\"info\":\"ðŸ“¥[6, 7, 42] ðŸ“¤[42] \",\"config\":\"\"}]","var_templatejgmgopco":null,"var_templatejkim8rzm":null,"var_templatejkim8w21":null,"vi_templatek0e3lgeo":"{\"nodes\":[{\"x\":121,\"y\":114,\"fixed\":true,\"text\":\"a\",\"initial\":true,\"px\":121,\"py\":114}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"1\"}],\"usercode\":\"a:\\n    emit(6,`fw_delay`)\"}","vi_templatek0e3lz43":"{\"nodes\":[{\"x\":89,\"y\":107,\"fixed\":true,\"initial\":true,\"text\":\"a\"}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"2\"}],\"usercode\":\"a:\\n    emit(7,`bw_delay`)\"}","vi_templatek0e3qybt":"{\"nodes\":[{\"x\":100,\"y\":81,\"fixed\":true,\"text\":\"state\",\"px\":100,\"py\":81,\"initial\":true},{\"x\":164,\"y\":148,\"fixed\":true,\"px\":164,\"py\":148,\"text\":\"finish\"}],\"edges\":[{\"source\":0,\"target\":0,\"text\":\"6,7\"},{\"source\":0,\"target\":1,\"text\":\"42\"},{\"source\":1,\"target\":0,\"text\":\"6,7\"}],\"usercode\":\"TABLE(buffer, (`buffer_size`,))\\nINTEGER(previous_delta, 0)\\nINTEGER(previous_time, 0)\\nINTEGER(buffer_index, 0)\\nINTEGER(conditional, 0)\\n\\nstate:\\n    {   \\n        now = AbsTime_ps\\n        now = str(now)\\n        L = len(now)\\n        digit = now[L-`number`]\\n        \\n        if digit == '1' or digit =='3' or digit == '5' or digit == '7' or digit =='9':\\n            buffer[buffer_index] = 1\\n        else:\\n            buffer[buffer_index] = 0\\n            \\n        buffer_index += 1\\n        \\n        #pause and flush\\n        conditional = int(buffer_index >= `buffer_size`)\\n    }\\n    \\n    emit(42,0,0, conditional)\\n\\nfinish:\\n    interrupt()\\n    \\nfinish--6-->state:\\n    buffer_index = 0\\n    conditional = 0\"}","vi_templatek6z7s4mo":"{\"nodes\":[{\"x\":192,\"y\":157,\"fixed\":true,\"initial\":true}],\"edges\":[],\"usercode\":\"\\n########## click Help on the menu to get started! ##########\\nRFILE(timetagger1,[0,1,2,3,4,5])\"}","dpp_templatek7r3sgz1":"# Unfortunately no realtime recipe for quTAG, as the file is not written by\n# the control software until the experiment is stopped.\n#------IMPORTS-----\n\nimport numpy as np\nimport pandas as pd\nfrom pathlib import Path\n\nimport etabackend.tk.plot as etaplt\nimport etabackend.tk.utils as etautils\n\n#------ADJUST DELAY-----\ndelay = int(float(delay))\neta.recipe.set_parameter(\"bw_delay\",str(max(0,-1*delay)))\neta.recipe.set_parameter(\"fw_delay\",str(max(0,delay)))\neta.load_recipe()\n\npath = Path(file)\ndatafolder='analyzed data'\ndatafolder = path.parent.joinpath(datafolder)\ndatafolder.mkdir(parents=True, exist_ok=True)\n\n\noutput_file = datafolder / (path.stem + '.txt')\nif output_file.is_file():\n    output_file.unlink()\n\nfp = open(datafolder / (path.stem + '.txt'), 'a')\n\n#------ETA PROCESSING-----\npos = 0\ncontext = None\nrun_flag = True\n\nwhile run_flag:\n    file_clips=eta.clips(Path(file), seek_event=pos)\n    result, context= eta.run({\"timetagger1\": file_clips}, resume_task=context, return_task=True, group='quTAG', max_autofeed=1)\n    \n    if result['timetagger1'].get_pos() == pos:\n        # No new elements left\n        eta.send(\"All elements processed.\")\n        run_flag = False\n        break\n    \n    pos = result['timetagger1'].get_pos()\n    max_index = result[\"buffer_index\"]\n    bit_data=result[\"buffer\"]\n    np.savetxt(fp, bit_data[0:max_index], fmt='%d', delimiter=\"\", newline=\"\")\n\nfp.close()","var_templatek8g3kag4":null,"var_templatek8g498fo":null,"var_templatek8g49hcs":null,"var_templateksuc2tvk":null}